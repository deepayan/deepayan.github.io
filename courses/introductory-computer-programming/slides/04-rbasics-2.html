---
layout: remark
title: Basic usage of R - 2
subtitle: Introductory Computer Programming
author: Deepayan Sarkar
mathjax: true
---

# Lists

* Lists are vectors with arbitrary types of components

* May or may not have names

* Usual vector indexing by `[` works in the usual way

* Individual elements can be extracted either by name (`$`) or by position `x[[i]]`





---

# Lists: examples


```r
m <- sample(1:12, 30, rep = TRUE)
mf <- factor(m, levels = 1:12, labels = month.name)
ml <- list(imonth = m, fmonth = mf)
str(ml)
```

```
List of 2
 $ imonth: int [1:30] 10 7 10 4 1 2 8 2 7 4 ...
 $ fmonth: Factor w/ 12 levels "January","February",..: 10 7 10 4 1 2 8 2 7 4 ...
```
--



```r
ml$imonth
```

```
 [1] 10  7 10  4  1  2  8  2  7  4  1  5  2  8  3 11 12  1  5 11  3  2  7  5  5  9  9  3  9  1
```
--



```r
ml[[2]]
```

```
 [1] October   July      October   April     January   February  August    February  July     
[10] April     January   May       February  August    March     November  December  January  
[19] May       November  March     February  July      May       May       September September
[28] March     September January  
12 Levels: January February March April May June July August September October ... December
```

<!-- ml[["fmonth"]] -->

---

# Lists: examples

* Lists are commonly used to return analysis results (more details later)


```r
tt <- t.test(rnorm(100))
str(tt, give.attr = FALSE)
```

```
List of 10
 $ statistic  : Named num -0.934
 $ parameter  : Named num 99
 $ p.value    : num 0.352
 $ conf.int   : num [1:2] -0.313 0.113
 $ estimate   : Named num -0.1
 $ null.value : Named num 0
 $ stderr     : num 0.107
 $ alternative: chr "two.sided"
 $ method     : chr "One Sample t-test"
 $ data.name  : chr "rnorm(100)"
```

```r
tt$p.value
```

```
[1] 0.3524269
```


---

layout: true

# Common structures for statistical data

---

* Vectors, matrices / arrays: vectors with dimension


```r
VADeaths
```

```
      Rural Male Rural Female Urban Male Urban Female
50-54       11.7          8.7       15.4          8.4
55-59       18.1         11.7       24.3         13.6
60-64       26.9         20.3       37.0         19.3
65-69       41.0         30.9       54.6         35.1
70-74       66.0         54.3       71.1         50.0
```

```r
dim(VADeaths)
```

```
[1] 5 4
```
---

* Indexing works in same way, but in two dimensions


```r
VADeaths[1:2, c(2, 3)]
```

```
      Rural Female Urban Male
50-54          8.7       15.4
55-59         11.7       24.3
```

* Example: Indexing by "empty" index (selects all) and name


```r
VADeaths[, c("Rural Male", "Rural Female")]
```

```
      Rural Male Rural Female
50-54       11.7          8.7
55-59       18.1         11.7
60-64       26.9         20.3
65-69       41.0         30.9
70-74       66.0         54.3
```

---

* Data frames: lists that also behave like a matrix


```r
str(mtcars)
```

```
'data.frame':	32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
```

```r
dim(mtcars)
```

```
[1] 32 11
```

---

layout: true

# Data Frames

---

* Rectangular (matrix-like) structure

* Each column is (usually) a vector

* Different columns can have different types (unlike a matrix)

* Every column must have the same length

* Every column must have a name
--

* Most built-in data sets in R are data frames

---

* List-like behaviour: Columns can be extracted like a list
	

```r
mtcars$mpg
```

```
 [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4 10.4 14.7 32.4 30.4
[20] 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7 15.0 21.4
```

* Vector indexing extracts list elements


```r
head(mtcars[c(1, 4, 7)])
```

```
                   mpg  hp  qsec
Mazda RX4         21.0 110 16.46
Mazda RX4 Wag     21.0 110 17.02
Datsun 710        22.8  93 18.61
Hornet 4 Drive    21.4 110 19.44
Hornet Sportabout 18.7 175 17.02
Valiant           18.1 105 20.22
```

---

* Matrix-like behaviour: Two-dimensional indexing


```r
mtcars[1:6, c(1, 4, 7)]
```

```
                   mpg  hp  qsec
Mazda RX4         21.0 110 16.46
Mazda RX4 Wag     21.0 110 17.02
Datsun 710        22.8  93 18.61
Hornet 4 Drive    21.4 110 19.44
Hornet Sportabout 18.7 175 17.02
Valiant           18.1 105 20.22
```

```r
mtcars[sample(nrow(mtcars), 6), c("mpg", "wt", "am", "gear")]
```

```
                     mpg    wt am gear
Honda Civic         30.4 1.615  1    4
Hornet 4 Drive      21.4 3.215  0    3
Lincoln Continental 10.4 5.424  0    3
Ferrari Dino        19.7 2.770  1    5
Pontiac Firebird    19.2 3.845  0    3
Merc 450SLC         15.2 3.780  0    3
```

---

layout: true

# Data input / output

---

* Statistical data are usually structured like a spreadsheet (e.g., Excel)

* Typical approach: read data from spreadsheet file into data frame

* Easiest route:

    * R itself cannot read Excel files directly

    * Save as CSV file from Excel

    * Read with `read.csv()` or `read.table()` (more flexible)

* Alternative option:

    * Use "Import Dataset" menu item in R Studio (requires add-on packages)

---

* Data frames can be exported as a spreadsheet file using
  `write.csv()` or `write.table()`


```r
data(Cars93, package = "MASS")
write.csv(Cars93, file = "temp/cars93.csv") # export
```

* This creates a [text file](temp/cars93.csv) (that can be easily edited in Excel / LibreOffice)

.scrollable300[


```
"","Manufacturer","Model","Type","Min.Price","Price","Max.Price","MPG.city","MPG.highway","AirBags","DriveTrain","Cylinders","EngineSize","Horsepower","RPM","Rev.per.mile","Man.trans.avail","Fuel.tank.capacity","Passengers","Length","Wheelbase","Width","Turn.circle","Rear.seat.room","Luggage.room","Weight","Origin","Make"
"1","Acura","Integra","Small",12.9,15.9,18.8,25,31,"None","Front","4",1.8,140,6300,2890,"Yes",13.2,5,177,102,68,37,26.5,11,2705,"non-USA","Acura Integra"
"2","Acura","Legend","Midsize",29.2,33.9,38.7,18,25,"Driver & Passenger","Front","6",3.2,200,5500,2335,"Yes",18,5,195,115,71,38,30,15,3560,"non-USA","Acura Legend"
"3","Audi","90","Compact",25.9,29.1,32.3,20,26,"Driver only","Front","6",2.8,172,5500,2280,"Yes",16.9,5,180,102,67,37,28,14,3375,"non-USA","Audi 90"
"4","Audi","100","Midsize",30.8,37.7,44.6,19,26,"Driver & Passenger","Front","6",2.8,172,5500,2535,"Yes",21.1,6,193,106,70,37,31,17,3405,"non-USA","Audi 100"
"5","BMW","535i","Midsize",23.7,30,36.2,22,30,"Driver only","Rear","4",3.5,208,5700,2545,"Yes",21.1,4,186,109,69,39,27,13,3640,"non-USA","BMW 535i"
"6","Buick","Century","Midsize",14.2,15.7,17.3,22,31,"Driver only","Front","4",2.2,110,5200,2565,"No",16.4,6,189,105,69,41,28,16,2880,"USA","Buick Century"
"7","Buick","LeSabre","Large",19.9,20.8,21.7,19,28,"Driver only","Front","6",3.8,170,4800,1570,"No",18,6,200,111,74,42,30.5,17,3470,"USA","Buick LeSabre"
"8","Buick","Roadmaster","Large",22.6,23.7,24.9,16,25,"Driver only","Rear","6",5.7,180,4000,1320,"No",23,6,216,116,78,45,30.5,21,4105,"USA","Buick Roadmaster"
"9","Buick","Riviera","Midsize",26.3,26.3,26.3,19,27,"Driver only","Front","6",3.8,170,4800,1690,"No",18.8,5,198,108,73,41,26.5,14,3495,"USA","Buick Riviera"
"10","Cadillac","DeVille","Large",33,34.7,36.3,16,25,"Driver only","Front","8",4.9,200,4100,1510,"No",18,6,206,114,73,43,35,18,3620,"USA","Cadillac DeVille"
"11","Cadillac","Seville","Midsize",37.5,40.1,42.7,16,25,"Driver & Passenger","Front","8",4.6,295,6000,1985,"No",20,5,204,111,74,44,31,14,3935,"USA","Cadillac Seville"
"12","Chevrolet","Cavalier","Compact",8.5,13.4,18.3,25,36,"None","Front","4",2.2,110,5200,2380,"Yes",15.2,5,182,101,66,38,25,13,2490,"USA","Chevrolet Cavalier"
"13","Chevrolet","Corsica","Compact",11.4,11.4,11.4,25,34,"Driver only","Front","4",2.2,110,5200,2665,"Yes",15.6,5,184,103,68,39,26,14,2785,"USA","Chevrolet Corsica"
"14","Chevrolet","Camaro","Sporty",13.4,15.1,16.8,19,28,"Driver & Passenger","Rear","6",3.4,160,4600,1805,"Yes",15.5,4,193,101,74,43,25,13,3240,"USA","Chevrolet Camaro"
"15","Chevrolet","Lumina","Midsize",13.4,15.9,18.4,21,29,"None","Front","4",2.2,110,5200,2595,"No",16.5,6,198,108,71,40,28.5,16,3195,"USA","Chevrolet Lumina"
"16","Chevrolet","Lumina_APV","Van",14.7,16.3,18,18,23,"None","Front","6",3.8,170,4800,1690,"No",20,7,178,110,74,44,30.5,NA,3715,"USA","Chevrolet Lumina_APV"
"17","Chevrolet","Astro","Van",14.7,16.6,18.6,15,20,"None","4WD","6",4.3,165,4000,1790,"No",27,8,194,111,78,42,33.5,NA,4025,"USA","Chevrolet Astro"
"18","Chevrolet","Caprice","Large",18,18.8,19.6,17,26,"Driver only","Rear","8",5,170,4200,1350,"No",23,6,214,116,77,42,29.5,20,3910,"USA","Chevrolet Caprice"
"19","Chevrolet","Corvette","Sporty",34.6,38,41.5,17,25,"Driver only","Rear","8",5.7,300,5000,1450,"Yes",20,2,179,96,74,43,NA,NA,3380,"USA","Chevrolet Corvette"
"20","Chrylser","Concorde","Large",18.4,18.4,18.4,20,28,"Driver & Passenger","Front","6",3.3,153,5300,1990,"No",18,6,203,113,74,40,31,15,3515,"USA","Chrylser Concorde"
"21","Chrysler","LeBaron","Compact",14.5,15.8,17.1,23,28,"Driver & Passenger","Front","4",3,141,5000,2090,"No",16,6,183,104,68,41,30.5,14,3085,"USA","Chrysler LeBaron"
"22","Chrysler","Imperial","Large",29.5,29.5,29.5,20,26,"Driver only","Front","6",3.3,147,4800,1785,"No",16,6,203,110,69,44,36,17,3570,"USA","Chrysler Imperial"
"23","Dodge","Colt","Small",7.9,9.2,10.6,29,33,"None","Front","4",1.5,92,6000,3285,"Yes",13.2,5,174,98,66,32,26.5,11,2270,"USA","Dodge Colt"
"24","Dodge","Shadow","Small",8.4,11.3,14.2,23,29,"Driver only","Front","4",2.2,93,4800,2595,"Yes",14,5,172,97,67,38,26.5,13,2670,"USA","Dodge Shadow"
"25","Dodge","Spirit","Compact",11.9,13.3,14.7,22,27,"Driver only","Front","4",2.5,100,4800,2535,"Yes",16,6,181,104,68,39,30.5,14,2970,"USA","Dodge Spirit"
"26","Dodge","Caravan","Van",13.6,19,24.4,17,21,"Driver only","4WD","6",3,142,5000,1970,"No",20,7,175,112,72,42,26.5,NA,3705,"USA","Dodge Caravan"
"27","Dodge","Dynasty","Midsize",14.8,15.6,16.4,21,27,"Driver only","Front","4",2.5,100,4800,2465,"No",16,6,192,105,69,42,30.5,16,3080,"USA","Dodge Dynasty"
"28","Dodge","Stealth","Sporty",18.5,25.8,33.1,18,24,"Driver only","4WD","6",3,300,6000,2120,"Yes",19.8,4,180,97,72,40,20,11,3805,"USA","Dodge Stealth"
"29","Eagle","Summit","Small",7.9,12.2,16.5,29,33,"None","Front","4",1.5,92,6000,2505,"Yes",13.2,5,174,98,66,36,26.5,11,2295,"USA","Eagle Summit"
"30","Eagle","Vision","Large",17.5,19.3,21.2,20,28,"Driver & Passenger","Front","6",3.5,214,5800,1980,"No",18,6,202,113,74,40,30,15,3490,"USA","Eagle Vision"
"31","Ford","Festiva","Small",6.9,7.4,7.9,31,33,"None","Front","4",1.3,63,5000,3150,"Yes",10,4,141,90,63,33,26,12,1845,"USA","Ford Festiva"
"32","Ford","Escort","Small",8.4,10.1,11.9,23,30,"None","Front","4",1.8,127,6500,2410,"Yes",13.2,5,171,98,67,36,28,12,2530,"USA","Ford Escort"
"33","Ford","Tempo","Compact",10.4,11.3,12.2,22,27,"None","Front","4",2.3,96,4200,2805,"Yes",15.9,5,177,100,68,39,27.5,13,2690,"USA","Ford Tempo"
"34","Ford","Mustang","Sporty",10.8,15.9,21,22,29,"Driver only","Rear","4",2.3,105,4600,2285,"Yes",15.4,4,180,101,68,40,24,12,2850,"USA","Ford Mustang"
"35","Ford","Probe","Sporty",12.8,14,15.2,24,30,"Driver only","Front","4",2,115,5500,2340,"Yes",15.5,4,179,103,70,38,23,18,2710,"USA","Ford Probe"
"36","Ford","Aerostar","Van",14.5,19.9,25.3,15,20,"Driver only","4WD","6",3,145,4800,2080,"Yes",21,7,176,119,72,45,30,NA,3735,"USA","Ford Aerostar"
"37","Ford","Taurus","Midsize",15.6,20.2,24.8,21,30,"Driver only","Front","6",3,140,4800,1885,"No",16,5,192,106,71,40,27.5,18,3325,"USA","Ford Taurus"
"38","Ford","Crown_Victoria","Large",20.1,20.9,21.7,18,26,"Driver only","Rear","8",4.6,190,4200,1415,"No",20,6,212,114,78,43,30,21,3950,"USA","Ford Crown_Victoria"
"39","Geo","Metro","Small",6.7,8.4,10,46,50,"None","Front","3",1,55,5700,3755,"Yes",10.6,4,151,93,63,34,27.5,10,1695,"non-USA","Geo Metro"
"40","Geo","Storm","Sporty",11.5,12.5,13.5,30,36,"Driver only","Front","4",1.6,90,5400,3250,"Yes",12.4,4,164,97,67,37,24.5,11,2475,"non-USA","Geo Storm"
"41","Honda","Prelude","Sporty",17,19.8,22.7,24,31,"Driver & Passenger","Front","4",2.3,160,5800,2855,"Yes",15.9,4,175,100,70,39,23.5,8,2865,"non-USA","Honda Prelude"
"42","Honda","Civic","Small",8.4,12.1,15.8,42,46,"Driver only","Front","4",1.5,102,5900,2650,"Yes",11.9,4,173,103,67,36,28,12,2350,"non-USA","Honda Civic"
"43","Honda","Accord","Compact",13.8,17.5,21.2,24,31,"Driver & Passenger","Front","4",2.2,140,5600,2610,"Yes",17,4,185,107,67,41,28,14,3040,"non-USA","Honda Accord"
"44","Hyundai","Excel","Small",6.8,8,9.2,29,33,"None","Front","4",1.5,81,5500,2710,"Yes",11.9,5,168,94,63,35,26,11,2345,"non-USA","Hyundai Excel"
"45","Hyundai","Elantra","Small",9,10,11,22,29,"None","Front","4",1.8,124,6000,2745,"Yes",13.7,5,172,98,66,36,28,12,2620,"non-USA","Hyundai Elantra"
"46","Hyundai","Scoupe","Sporty",9.1,10,11,26,34,"None","Front","4",1.5,92,5550,2540,"Yes",11.9,4,166,94,64,34,23.5,9,2285,"non-USA","Hyundai Scoupe"
"47","Hyundai","Sonata","Midsize",12.4,13.9,15.3,20,27,"None","Front","4",2,128,6000,2335,"Yes",17.2,5,184,104,69,41,31,14,2885,"non-USA","Hyundai Sonata"
"48","Infiniti","Q45","Midsize",45.4,47.9,50.4,17,22,"Driver only","Rear","8",4.5,278,6000,1955,"No",22.5,5,200,113,72,42,29,15,4000,"non-USA","Infiniti Q45"
"49","Lexus","ES300","Midsize",27.5,28,28.4,18,24,"Driver only","Front","6",3,185,5200,2325,"Yes",18.5,5,188,103,70,40,27.5,14,3510,"non-USA","Lexus ES300"
"50","Lexus","SC300","Midsize",34.7,35.2,35.6,18,23,"Driver & Passenger","Rear","6",3,225,6000,2510,"Yes",20.6,4,191,106,71,39,25,9,3515,"non-USA","Lexus SC300"
"51","Lincoln","Continental","Midsize",33.3,34.3,35.3,17,26,"Driver & Passenger","Front","6",3.8,160,4400,1835,"No",18.4,6,205,109,73,42,30,19,3695,"USA","Lincoln Continental"
"52","Lincoln","Town_Car","Large",34.4,36.1,37.8,18,26,"Driver & Passenger","Rear","8",4.6,210,4600,1840,"No",20,6,219,117,77,45,31.5,22,4055,"USA","Lincoln Town_Car"
"53","Mazda","323","Small",7.4,8.3,9.1,29,37,"None","Front","4",1.6,82,5000,2370,"Yes",13.2,4,164,97,66,34,27,16,2325,"non-USA","Mazda 323"
"54","Mazda","Protege","Small",10.9,11.6,12.3,28,36,"None","Front","4",1.8,103,5500,2220,"Yes",14.5,5,172,98,66,36,26.5,13,2440,"non-USA","Mazda Protege"
"55","Mazda","626","Compact",14.3,16.5,18.7,26,34,"Driver only","Front","4",2.5,164,5600,2505,"Yes",15.5,5,184,103,69,40,29.5,14,2970,"non-USA","Mazda 626"
"56","Mazda","MPV","Van",16.6,19.1,21.7,18,24,"None","4WD","6",3,155,5000,2240,"No",19.6,7,190,110,72,39,27.5,NA,3735,"non-USA","Mazda MPV"
"57","Mazda","RX-7","Sporty",32.5,32.5,32.5,17,25,"Driver only","Rear","rotary",1.3,255,6500,2325,"Yes",20,2,169,96,69,37,NA,NA,2895,"non-USA","Mazda RX-7"
"58","Mercedes-Benz","190E","Compact",29,31.9,34.9,20,29,"Driver only","Rear","4",2.3,130,5100,2425,"Yes",14.5,5,175,105,67,34,26,12,2920,"non-USA","Mercedes-Benz 190E"
"59","Mercedes-Benz","300E","Midsize",43.8,61.9,80,19,25,"Driver & Passenger","Rear","6",3.2,217,5500,2220,"No",18.5,5,187,110,69,37,27,15,3525,"non-USA","Mercedes-Benz 300E"
"60","Mercury","Capri","Sporty",13.3,14.1,15,23,26,"Driver only","Front","4",1.6,100,5750,2475,"Yes",11.1,4,166,95,65,36,19,6,2450,"USA","Mercury Capri"
"61","Mercury","Cougar","Midsize",14.9,14.9,14.9,19,26,"None","Rear","6",3.8,140,3800,1730,"No",18,5,199,113,73,38,28,15,3610,"USA","Mercury Cougar"
"62","Mitsubishi","Mirage","Small",7.7,10.3,12.9,29,33,"None","Front","4",1.5,92,6000,2505,"Yes",13.2,5,172,98,67,36,26,11,2295,"non-USA","Mitsubishi Mirage"
"63","Mitsubishi","Diamante","Midsize",22.4,26.1,29.9,18,24,"Driver only","Front","6",3,202,6000,2210,"No",19,5,190,107,70,43,27.5,14,3730,"non-USA","Mitsubishi Diamante"
"64","Nissan","Sentra","Small",8.7,11.8,14.9,29,33,"Driver only","Front","4",1.6,110,6000,2435,"Yes",13.2,5,170,96,66,33,26,12,2545,"non-USA","Nissan Sentra"
"65","Nissan","Altima","Compact",13,15.7,18.3,24,30,"Driver only","Front","4",2.4,150,5600,2130,"Yes",15.9,5,181,103,67,40,28.5,14,3050,"non-USA","Nissan Altima"
"66","Nissan","Quest","Van",16.7,19.1,21.5,17,23,"None","Front","6",3,151,4800,2065,"No",20,7,190,112,74,41,27,NA,4100,"non-USA","Nissan Quest"
"67","Nissan","Maxima","Midsize",21,21.5,22,21,26,"Driver only","Front","6",3,160,5200,2045,"No",18.5,5,188,104,69,41,28.5,14,3200,"non-USA","Nissan Maxima"
"68","Oldsmobile","Achieva","Compact",13,13.5,14,24,31,"None","Front","4",2.3,155,6000,2380,"No",15.2,5,188,103,67,39,28,14,2910,"USA","Oldsmobile Achieva"
"69","Oldsmobile","Cutlass_Ciera","Midsize",14.2,16.3,18.4,23,31,"Driver only","Front","4",2.2,110,5200,2565,"No",16.5,5,190,105,70,42,28,16,2890,"USA","Oldsmobile Cutlass_Ciera"
"70","Oldsmobile","Silhouette","Van",19.5,19.5,19.5,18,23,"None","Front","6",3.8,170,4800,1690,"No",20,7,194,110,74,44,30.5,NA,3715,"USA","Oldsmobile Silhouette"
"71","Oldsmobile","Eighty-Eight","Large",19.5,20.7,21.9,19,28,"Driver only","Front","6",3.8,170,4800,1570,"No",18,6,201,111,74,42,31.5,17,3470,"USA","Oldsmobile Eighty-Eight"
"72","Plymouth","Laser","Sporty",11.4,14.4,17.4,23,30,"None","4WD","4",1.8,92,5000,2360,"Yes",15.9,4,173,97,67,39,24.5,8,2640,"USA","Plymouth Laser"
"73","Pontiac","LeMans","Small",8.2,9,9.9,31,41,"None","Front","4",1.6,74,5600,3130,"Yes",13.2,4,177,99,66,35,25.5,17,2350,"USA","Pontiac LeMans"
"74","Pontiac","Sunbird","Compact",9.4,11.1,12.8,23,31,"None","Front","4",2,110,5200,2665,"Yes",15.2,5,181,101,66,39,25,13,2575,"USA","Pontiac Sunbird"
"75","Pontiac","Firebird","Sporty",14,17.7,21.4,19,28,"Driver & Passenger","Rear","6",3.4,160,4600,1805,"Yes",15.5,4,196,101,75,43,25,13,3240,"USA","Pontiac Firebird"
"76","Pontiac","Grand_Prix","Midsize",15.4,18.5,21.6,19,27,"None","Front","6",3.4,200,5000,1890,"Yes",16.5,5,195,108,72,41,28.5,16,3450,"USA","Pontiac Grand_Prix"
"77","Pontiac","Bonneville","Large",19.4,24.4,29.4,19,28,"Driver & Passenger","Front","6",3.8,170,4800,1565,"No",18,6,177,111,74,43,30.5,18,3495,"USA","Pontiac Bonneville"
"78","Saab","900","Compact",20.3,28.7,37.1,20,26,"Driver only","Front","4",2.1,140,6000,2910,"Yes",18,5,184,99,67,37,26.5,14,2775,"non-USA","Saab 900"
"79","Saturn","SL","Small",9.2,11.1,12.9,28,38,"Driver only","Front","4",1.9,85,5000,2145,"Yes",12.8,5,176,102,68,40,26.5,12,2495,"USA","Saturn SL"
"80","Subaru","Justy","Small",7.3,8.4,9.5,33,37,"None","4WD","3",1.2,73,5600,2875,"Yes",9.2,4,146,90,60,32,23.5,10,2045,"non-USA","Subaru Justy"
"81","Subaru","Loyale","Small",10.5,10.9,11.3,25,30,"None","4WD","4",1.8,90,5200,3375,"Yes",15.9,5,175,97,65,35,27.5,15,2490,"non-USA","Subaru Loyale"
"82","Subaru","Legacy","Compact",16.3,19.5,22.7,23,30,"Driver only","4WD","4",2.2,130,5600,2330,"Yes",15.9,5,179,102,67,37,27,14,3085,"non-USA","Subaru Legacy"
"83","Suzuki","Swift","Small",7.3,8.6,10,39,43,"None","Front","3",1.3,70,6000,3360,"Yes",10.6,4,161,93,63,34,27.5,10,1965,"non-USA","Suzuki Swift"
"84","Toyota","Tercel","Small",7.8,9.8,11.8,32,37,"Driver only","Front","4",1.5,82,5200,3505,"Yes",11.9,5,162,94,65,36,24,11,2055,"non-USA","Toyota Tercel"
"85","Toyota","Celica","Sporty",14.2,18.4,22.6,25,32,"Driver only","Front","4",2.2,135,5400,2405,"Yes",15.9,4,174,99,69,39,23,13,2950,"non-USA","Toyota Celica"
"86","Toyota","Camry","Midsize",15.2,18.2,21.2,22,29,"Driver only","Front","4",2.2,130,5400,2340,"Yes",18.5,5,188,103,70,38,28.5,15,3030,"non-USA","Toyota Camry"
"87","Toyota","Previa","Van",18.9,22.7,26.6,18,22,"Driver only","4WD","4",2.4,138,5000,2515,"Yes",19.8,7,187,113,71,41,35,NA,3785,"non-USA","Toyota Previa"
"88","Volkswagen","Fox","Small",8.7,9.1,9.5,25,33,"None","Front","4",1.8,81,5500,2550,"Yes",12.4,4,163,93,63,34,26,10,2240,"non-USA","Volkswagen Fox"
"89","Volkswagen","Eurovan","Van",16.6,19.7,22.7,17,21,"None","Front","5",2.5,109,4500,2915,"Yes",21.1,7,187,115,72,38,34,NA,3960,"non-USA","Volkswagen Eurovan"
"90","Volkswagen","Passat","Compact",17.6,20,22.4,21,30,"None","Front","4",2,134,5800,2685,"Yes",18.5,5,180,103,67,35,31.5,14,2985,"non-USA","Volkswagen Passat"
"91","Volkswagen","Corrado","Sporty",22.9,23.3,23.7,18,25,"None","Front","6",2.8,178,5800,2385,"Yes",18.5,4,159,97,66,36,26,15,2810,"non-USA","Volkswagen Corrado"
"92","Volvo","240","Compact",21.8,22.7,23.5,21,28,"Driver only","Rear","4",2.3,114,5400,2215,"Yes",15.8,5,190,104,67,37,29.5,14,2985,"non-USA","Volvo 240"
"93","Volvo","850","Midsize",24.8,26.7,28.5,20,28,"Driver & Passenger","Front","5",2.4,168,6200,2310,"Yes",19.3,5,184,105,69,38,30,15,3245,"non-USA","Volvo 850"
```

]

---

* We can use `read.csv()` to import it again

.scrollable400[


```r
cars <- read.csv("temp/cars93.csv") # import (path relative to working directory)
str(cars)
```

```
'data.frame':	93 obs. of  28 variables:
 $ X                 : int  1 2 3 4 5 6 7 8 9 10 ...
 $ Manufacturer      : chr  "Acura" "Acura" "Audi" "Audi" ...
 $ Model             : chr  "Integra" "Legend" "90" "100" ...
 $ Type              : chr  "Small" "Midsize" "Compact" "Midsize" ...
 $ Min.Price         : num  12.9 29.2 25.9 30.8 23.7 14.2 19.9 22.6 26.3 33 ...
 $ Price             : num  15.9 33.9 29.1 37.7 30 15.7 20.8 23.7 26.3 34.7 ...
 $ Max.Price         : num  18.8 38.7 32.3 44.6 36.2 17.3 21.7 24.9 26.3 36.3 ...
 $ MPG.city          : int  25 18 20 19 22 22 19 16 19 16 ...
 $ MPG.highway       : int  31 25 26 26 30 31 28 25 27 25 ...
 $ AirBags           : chr  "None" "Driver & Passenger" "Driver only" "Driver & Passenger" ...
 $ DriveTrain        : chr  "Front" "Front" "Front" "Front" ...
 $ Cylinders         : chr  "4" "6" "6" "6" ...
 $ EngineSize        : num  1.8 3.2 2.8 2.8 3.5 2.2 3.8 5.7 3.8 4.9 ...
 $ Horsepower        : int  140 200 172 172 208 110 170 180 170 200 ...
 $ RPM               : int  6300 5500 5500 5500 5700 5200 4800 4000 4800 4100 ...
 $ Rev.per.mile      : int  2890 2335 2280 2535 2545 2565 1570 1320 1690 1510 ...
 $ Man.trans.avail   : chr  "Yes" "Yes" "Yes" "Yes" ...
 $ Fuel.tank.capacity: num  13.2 18 16.9 21.1 21.1 16.4 18 23 18.8 18 ...
 $ Passengers        : int  5 5 5 6 4 6 6 6 5 6 ...
 $ Length            : int  177 195 180 193 186 189 200 216 198 206 ...
 $ Wheelbase         : int  102 115 102 106 109 105 111 116 108 114 ...
 $ Width             : int  68 71 67 70 69 69 74 78 73 73 ...
 $ Turn.circle       : int  37 38 37 37 39 41 42 45 41 43 ...
 $ Rear.seat.room    : num  26.5 30 28 31 27 28 30.5 30.5 26.5 35 ...
 $ Luggage.room      : int  11 15 14 17 13 16 17 21 14 18 ...
 $ Weight            : int  2705 3560 3375 3405 3640 2880 3470 4105 3495 3620 ...
 $ Origin            : chr  "non-USA" "non-USA" "non-USA" "non-USA" ...
 $ Make              : chr  "Acura Integra" "Acura Legend" "Audi 90" "Audi 100" ...
```

]

---

* These are the most basic data input / output functions

* There are many other other specialized functions

* Low-level utilties: `scan()`, `readLines()`, `readChar()`, `readBin()`

* Various packages provide import / export to formats used by other software

* R has its own "serialization" format using `save()` and `load()`


---

layout: true

# Functions

---

* Most useful things in R happen by calling functions

* Functions have one or more arguments

    * All arguments have names (available as variables inside the function)
--

	* Arguments may be compulsory or optional

	* Optional arguments usually have "default" values 
--

	* Arguments may or may not be named when the function is called
	
	* Unnamed arguments are matched by position

	* Optional arguments are usually named
	
* Functions normally also have a useful "return" value

---

* For example, linear models are fit using the function `lm()`


```r
str(lm)
```

```
function (formula, data, subset, weights, na.action, method = "qr", model = TRUE, x = FALSE, 
    y = FALSE, qr = TRUE, singular.ok = TRUE, contrasts = NULL, offset, ...)  
```

* These calls are equivalent


```r
fm1 <- lm(mpg ~ wt, mtcars, (am == 0))
fm2 <- lm(mpg ~ wt, data = mtcars, method = "qr", subset = (am == 0))
coef(fm1)
```

```
(Intercept)          wt 
  31.416055   -3.785908 
```

```r
coef(fm2)
```

```
(Intercept)          wt 
  31.416055   -3.785908 
```

* Rule: named arguments are matched by name, remaining by position

---

* The return value of `lm()` is a list

.scrollable400[


```r
str(fm2)
```

```
List of 12
 $ coefficients : Named num [1:2] 31.42 -3.79
  ..- attr(*, "names")= chr [1:2] "(Intercept)" "wt"
 $ residuals    : Named num [1:19] 2.156 0.307 -0.217 -3.6 5.061 ...
  ..- attr(*, "names")= chr [1:19] "Hornet 4 Drive" "Hornet Sportabout" "Valiant" "Duster 360" ...
 $ effects      : Named num [1:19] -74.744 -12.487 -0.614 -4 4.672 ...
  ..- attr(*, "names")= chr [1:19] "(Intercept)" "wt" "" "" ...
 $ rank         : int 2
 $ fitted.values: Named num [1:19] 19.2 18.4 18.3 17.9 19.3 ...
  ..- attr(*, "names")= chr [1:19] "Hornet 4 Drive" "Hornet Sportabout" "Valiant" "Duster 360" ...
 $ assign       : int [1:2] 0 1
 $ qr           :List of 5
  ..$ qr   : num [1:19, 1:2] -4.359 0.229 0.229 0.229 0.229 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:19] "Hornet 4 Drive" "Hornet Sportabout" "Valiant" "Duster 360" ...
  .. .. ..$ : chr [1:2] "(Intercept)" "wt"
  .. ..- attr(*, "assign")= int [1:2] 0 1
  ..$ qraux: num [1:2] 1.23 1.07
  ..$ pivot: int [1:2] 1 2
  ..$ tol  : num 1e-07
  ..$ rank : int 2
  ..- attr(*, "class")= chr "qr"
 $ df.residual  : int 17
 $ xlevels      : Named list()
 $ call         : language lm(formula = mpg ~ wt, data = mtcars, subset = (am == 0), method = "qr")
 $ terms        :Classes 'terms', 'formula'  language mpg ~ wt
  .. ..- attr(*, "variables")= language list(mpg, wt)
  .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:2] "mpg" "wt"
  .. .. .. ..$ : chr "wt"
  .. ..- attr(*, "term.labels")= chr "wt"
  .. ..- attr(*, "order")= int 1
  .. ..- attr(*, "intercept")= int 1
  .. ..- attr(*, "response")= int 1
  .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv> 
  .. ..- attr(*, "predvars")= language list(mpg, wt)
  .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. ..- attr(*, "names")= chr [1:2] "mpg" "wt"
 $ model        :'data.frame':	19 obs. of  2 variables:
  ..$ mpg: num [1:19] 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 ...
  ..$ wt : num [1:19] 3.21 3.44 3.46 3.57 3.19 ...
  ..- attr(*, "terms")=Classes 'terms', 'formula'  language mpg ~ wt
  .. .. ..- attr(*, "variables")= language list(mpg, wt)
  .. .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:2] "mpg" "wt"
  .. .. .. .. ..$ : chr "wt"
  .. .. ..- attr(*, "term.labels")= chr "wt"
  .. .. ..- attr(*, "order")= int 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv> 
  .. .. ..- attr(*, "predvars")= language list(mpg, wt)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. .. ..- attr(*, "names")= chr [1:2] "mpg" "wt"
 - attr(*, "class")= chr "lm"
```

]

---

* Individual elements can be extracted using list indexing


```r
fm2$coefficients
```

```
(Intercept)          wt 
  31.416055   -3.785908 
```

```r
fm2$residuals
```

```
     Hornet 4 Drive   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
        2.155637322         0.307466517        -0.216815332        -3.600365503         5.060989634 
           Merc 230            Merc 280           Merc 280C          Merc 450SE          Merc 450SL 
        3.309553333         0.807466517        -0.592533483         0.392588263         0.005379702 
        Merc 450SLC  Cadillac Fleetwood Lincoln Continental   Chrysler Imperial       Toyota Corona 
       -1.905324922        -1.140040848        -0.481292938         3.519620367        -0.583793327 
   Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird 
       -2.589660880        -3.211463020        -3.578170470         2.340759068 
```

---

layout: true

# Attributes

---

* The names (derived from row names of the data) can be used as index 


```r
fm2$residuals["Chrysler Imperial"]
```

```
Chrysler Imperial 
          3.51962 
```

* The names associated with a vector can be obtained using `names()`


```r
names(fm2$residuals)
```

```
 [1] "Hornet 4 Drive"      "Hornet Sportabout"   "Valiant"             "Duster 360"         
 [5] "Merc 240D"           "Merc 230"            "Merc 280"            "Merc 280C"          
 [9] "Merc 450SE"          "Merc 450SL"          "Merc 450SLC"         "Cadillac Fleetwood" 
[13] "Lincoln Continental" "Chrysler Imperial"   "Toyota Corona"       "Dodge Challenger"   
[17] "AMC Javelin"         "Camaro Z28"          "Pontiac Firebird"   
```

---

* These names are actually stored as an _attribute_ called "names"


```r
attr(fm2$residuals, "names")
```

```
 [1] "Hornet 4 Drive"      "Hornet Sportabout"   "Valiant"             "Duster 360"         
 [5] "Merc 240D"           "Merc 230"            "Merc 280"            "Merc 280C"          
 [9] "Merc 450SE"          "Merc 450SL"          "Merc 450SLC"         "Cadillac Fleetwood" 
[13] "Lincoln Continental" "Chrysler Imperial"   "Toyota Corona"       "Dodge Challenger"   
[17] "AMC Javelin"         "Camaro Z28"          "Pontiac Firebird"   
```

* Attributes are arbitrary R objects that can be attached to any other object

* Typically used for programming convenience, normally not seen by users

* However, some attributes are "special"

---

* The "names" attribute can be extracted using the function `names()`

* `dimnames()` similarly gives row / column names for matrices and arrays


```r
dimnames(VADeaths)
```

```
[[1]]
[1] "50-54" "55-59" "60-64" "65-69" "70-74"

[[2]]
[1] "Rural Male"   "Rural Female" "Urban Male"   "Urban Female"
```

```r
attr(VADeaths, "dimnames")
```

```
[[1]]
[1] "50-54" "55-59" "60-64" "65-69" "70-74"

[[2]]
[1] "Rural Male"   "Rural Female" "Urban Male"   "Urban Female"
```

---

* For example, column names can be obtained as


```r
dimnames(VADeaths)[[2]]
```

```
[1] "Rural Male"   "Rural Female" "Urban Male"   "Urban Female"
```

* There are convenient shortcuts called `rownames()` and `colnames()`


```r
colnames(VADeaths)
```

```
[1] "Rural Male"   "Rural Female" "Urban Male"   "Urban Female"
```

---

* In fact, we can easily verify that this is what `colnames()` is doing by printing it


```r
colnames
```

```
function (x, do.NULL = TRUE, prefix = "col") 
{
    if (is.data.frame(x) && do.NULL) 
        return(names(x))
    dn <- dimnames(x)
    if (!is.null(dn[[2L]])) 
        dn[[2L]]
    else {
        nc <- NCOL(x)
        if (do.NULL) 
            NULL
        else if (nc > 0L) 
            paste0(prefix, seq_len(nc))
        else character()
    }
}
<bytecode: 0x7fc35ebcd670>
<environment: namespace:base>
```

* All R functions can be easily inspected in this way

---

* Another very important attribute is "class"

* For example, the return value of `lm()` has class "lm"


```r
attr(fm2, "class")
```

```
[1] "lm"
```

* The class of an object can also be obtained using the function `class()`


```r
class(fm2)
```

```
[1] "lm"
```

---

layout: true

# Class, generic functions, and methods

---

* The class of an object is fundamental to how R works

* Every object in R must have a class

* This is true even if the object does not have a class attribute


```r
class(colnames)
```

```
[1] "function"
```

```r
attr(colnames, "class")
```

```
NULL
```

```r
class(VADeaths)
```

```
[1] "matrix" "array" 
```

```r
attr(VADeaths, "class")
```

```
NULL
```

---

* The main use of the class of an object is in how _generic functions_ behave

* Generic functions are intended to perform general tasks, like

	- `print()`

	- `plot()`

	- `summary()`

* But details of what these functions should do depends on the input


---


```r
print(VADeaths) 
```

```
      Rural Male Rural Female Urban Male Urban Female
50-54       11.7          8.7       15.4          8.4
55-59       18.1         11.7       24.3         13.6
60-64       26.9         20.3       37.0         19.3
65-69       41.0         30.9       54.6         35.1
70-74       66.0         54.3       71.1         50.0
```

```r
print(fm2)
```

```

Call:
lm(formula = mpg ~ wt, data = mtcars, subset = (am == 0), method = "qr")

Coefficients:
(Intercept)           wt  
     31.416       -3.786  
```

---


```r
summary(VADeaths) 
```

```
   Rural Male     Rural Female     Urban Male     Urban Female  
 Min.   :11.70   Min.   : 8.70   Min.   :15.40   Min.   : 8.40  
 1st Qu.:18.10   1st Qu.:11.70   1st Qu.:24.30   1st Qu.:13.60  
 Median :26.90   Median :20.30   Median :37.00   Median :19.30  
 Mean   :32.74   Mean   :25.18   Mean   :40.48   Mean   :25.28  
 3rd Qu.:41.00   3rd Qu.:30.90   3rd Qu.:54.60   3rd Qu.:35.10  
 Max.   :66.00   Max.   :54.30   Max.   :71.10   Max.   :50.00  
```

---


```r
summary(fm2)
```

```

Call:
lm(formula = mpg ~ wt, data = mtcars, subset = (am == 0), method = "qr")

Residuals:
    Min      1Q  Median      3Q     Max 
-3.6004 -1.5227 -0.2168  1.4816  5.0610 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  31.4161     2.9467  10.661 6.01e-09 ***
wt           -3.7859     0.7666  -4.939 0.000125 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.528 on 17 degrees of freedom
Multiple R-squared:  0.5893,	Adjusted R-squared:  0.5651 
F-statistic: 24.39 on 1 and 17 DF,  p-value: 0.0001246
```

* This kind of customized output is achieved by _methods_

---

* Methods are specific implementations of a generic function customized to its input

* The appropriate method is chosen by looking at the _class_ of the input argument
--

* The methods available for a generic function can be obtained using the `methods()` function


```r
methods("summary")
```

```
 [1] summary.Date                   summary.POSIXct                summary.POSIXlt               
 [4] summary.aov                    summary.aovlist*               summary.aspell*               
 [7] summary.check_packages_in_dir* summary.connection             summary.data.frame            
[10] summary.default                summary.ecdf*                  summary.factor                
[13] summary.glm                    summary.infl*                  summary.lm                    
[16] summary.loess*                 summary.manova                 summary.matrix                
[19] summary.mlm*                   summary.nls*                   summary.packageStatus*        
[22] summary.ppr*                   summary.prcomp*                summary.princomp*             
[25] summary.proc_time              summary.shingle*               summary.srcfile               
[28] summary.srcref                 summary.stepfun                summary.stl*                  
[31] summary.table                  summary.trellis*               summary.tukeysmooth*          
[34] summary.warnings              
see '?methods' for accessing help and source code
```


---

layout: false

# Other important features

* Getting help

* Help for generic functions and methods

* How matrices and arrays are implemented in R

<!-- 

* Homework --- read the following tutorials

	* [Introduction and Language Overview I](https://www.isid.ac.in/~deepayan/R-tutorials/labs/01_introduction_lab.pdf)

	* [Language Overview II](https://www.isid.ac.in/~deepayan/R-tutorials/labs/02_language_lab.pdf)

	* Supplementary files:
      [Gcsemv.txt](https://www.isid.ac.in/~deepayan/R-tutorials/data/Gcsemv.txt),
      [iris.xls](https://www.isid.ac.in/~deepayan/R-tutorials/data/iris.xls),

-->
